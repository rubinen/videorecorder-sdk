/* gstreamer.c generated by valac 0.11.3, the Vala compiler
 * generated from gstreamer.vala, do not modify */


#include <glib.h>
#include <glib-object.h>
#include <stdlib.h>
#include <string.h>
#include <gst/gst.h>

#define _gst_object_unref0(var) ((var == NULL) ? NULL : (var = (gst_object_unref (var), NULL)))
#define _g_main_loop_unref0(var) ((var == NULL) ? NULL : (var = (g_main_loop_unref (var), NULL)))



void _vala_main (gchar** args, int args_length1);


static gpointer _gst_object_ref0 (gpointer self) {
	return self ? gst_object_ref (self) : NULL;
}


void _vala_main (gchar** args, int args_length1) {
	GstElement* src;
	GstElement* sink;
	GstPipeline* pipeline;
	GstPipeline* _tmp0_ = NULL;
	GstPipeline* _tmp1_;
	GstElement* _tmp2_ = NULL;
	GstElement* _tmp3_;
	GstElement* _tmp4_ = NULL;
	GstElement* _tmp5_;
	GstElement* _tmp6_;
	GstElement* _tmp7_;
	GMainLoop* _tmp8_ = NULL;
	GMainLoop* loop;
	src = NULL;
	sink = NULL;
	pipeline = NULL;
	gst_init (&args_length1, &args);
	_tmp0_ = (GstPipeline*) gst_pipeline_new ("test");
	_tmp1_ = GST_PIPELINE (_tmp0_);
	_gst_object_unref0 (pipeline);
	pipeline = _tmp1_;
	_tmp2_ = gst_element_factory_make ("audiotestsrc", "my_src");
	_tmp3_ = _tmp2_;
	_gst_object_unref0 (src);
	src = _tmp3_;
	_tmp4_ = gst_element_factory_make ("autoaudiosink", "my_sink");
	_tmp5_ = _tmp4_;
	_gst_object_unref0 (sink);
	sink = _tmp5_;
	_tmp6_ = _gst_object_ref0 (src);
	_tmp7_ = _gst_object_ref0 (sink);
	gst_bin_add_many ((GstBin*) pipeline, _tmp6_, _tmp7_, NULL);
	gst_element_link (src, sink);
	g_object_set ((GObject*) src, "wave", 1, NULL);
	gst_element_set_state ((GstElement*) pipeline, GST_STATE_PLAYING);
	_tmp8_ = g_main_loop_new (NULL, FALSE);
	loop = _tmp8_;
	g_main_loop_run (loop);
	_g_main_loop_unref0 (loop);
	_gst_object_unref0 (pipeline);
	_gst_object_unref0 (sink);
	_gst_object_unref0 (src);
}


int main (int argc, char ** argv) {
	g_type_init ();
	_vala_main (argv, argc);
	return 0;
}



